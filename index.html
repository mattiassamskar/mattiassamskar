<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="canonical" href="https://www.mattiassamskar.se/" />
  <meta name="description" content="Hej! Här är jag på Internet." />
  <title>Mattias Sämskar</title>
  <style>
    @font-face {
      font-family: "Arcade Classic";
      src: url("Arcade Classic.ttf");
    }

    body {
      margin: 0;
      font-family: "Arcade Classic";
      color: white;
    }
  </style>
</head>

<body>
  <canvas id="canvas"></canvas>

  <script>
    const randomInt = (min, max) =>
      Math.floor(Math.random() * (max - min + 1) + min);

    const initStars = () => {
      const stars = [];
      for (x = 0; x < 120; x++) {
        const size = randomInt(1, 3)
        const gray = 127 + 40 * size;
        stars.push({
          y: randomInt(0, canvas.height),
          x: randomInt(0, canvas.width),
          size,
          speed: size * 1.5,
          color: {
            red: gray,
            green: gray,
            blue: gray,
            opacity: 255
          }
        })
      }
      return stars;
    }

    const initEnemies = () => {
      return ["twitter.svg", "github.svg", "youtube.svg", "gmail.svg"].map(name => {
        const image = new Image(98, 83);
        image.src = name;

        return {
          name,
          image,
          x: randomInt(0, canvas.width - image.width),
          y: randomInt(0, canvas.height / 2),
          xd: randomInt(0, 1),
          yd: randomInt(0, 1),
          timeout: randomInt(1, 10)
        }
      })
    }

    const putStar = (pixelData, star) => {
      star.x = star.x + star.speed;
      if (star.x >= canvas.width) {
        star.x = 0
        star.y = randomInt(0, canvas.width)
      };

      putPixel(pixelData, star.x, star.y, star.color)
      putPixel(pixelData, star.x, star.y + 1, star.color)
      putPixel(pixelData, star.x + 1, star.y, star.color)
      putPixel(pixelData, star.x + 1, star.y + 1, star.color)
      if (star.size > 1) {
        putPixel(pixelData, star.x, star.y + 2, star.color)
        putPixel(pixelData, star.x + 2, star.y, star.color)
        putPixel(pixelData, star.x + 2, star.y + 2, star.color)
      }
      if (star.size > 2) {
        putPixel(pixelData, star.x, star.y + 3, star.color)
        putPixel(pixelData, star.x + 3, star.y, star.color)
        putPixel(pixelData, star.x + 3, star.y + 3, star.color)
      }
    }

    const putPixel = (pixelData, x, y, color) => {
      const i = (x + y * canvas.width) * 4;
      pixelData.data[i] = color.red;
      pixelData.data[i + 1] = color.green;
      pixelData.data[i + 2] = color.blue;
      pixelData.data[i + 3] = color.opacity;
    }

    const putText = (ctx, message) => {
      ctx.fillText(message.text, message.x, message.y);
      message.x -= 4;
      if (message.x + textWidth < 0) {
        message.x = canvas.width;
      }
    }

    const moveEnemy = (ctx, enemy) => {
      ctx.drawImage(enemy.image, enemy.x, enemy.y, 98 * 0.8, 83 * 0.8);
      enemy.timeout--;
      if (enemy.timeout > 0) return;

      if (randomInt(0, 100) > 90) {
        enemy.xd = enemy.xd === 0 ? 1 : 0
      }
      if (randomInt(0, 100) > 95) {
        enemy.yd = enemy.yd === 0 ? 1 : 0
      }

      enemy.timeout = 15;
      enemy.x = enemy.xd === 0 ? enemy.x - 12 : enemy.x + 12;
      enemy.y = enemy.yd === 0 ? enemy.y - 6 : enemy.y + 6;
      if (enemy.x + enemy.image.width >= canvas.width) {
        enemy.x = canvas.width - enemy.image.width;
        enemy.xd = 0;
      }
      if (enemy.x <= 0) {
        enemy.x = 0;
        enemy.xd = 1;
      }
      if (enemy.y > canvas.height / 2) {
        enemy.yd = 0;
      }
      if (enemy.y <= 0) {
        enemy.yd = 1;
      }
    }

    const canvas = document.getElementById("canvas");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    canvas.style.background = "black"
    const ctx = canvas.getContext("2d");

    const stars = initStars();
    const enemies = initEnemies();
    const message = {
      text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer viverra mollis tortor, at egestas magna finibus consectetur. Aenean rutrum mi vitae pretium placerat. Nullam auctor sapien et purus sollicitudin, quis molestie lectus bibendum. Suspendisse auctor purus quis accumsan gravida. Proin ultricies lacinia neque. Nullam et feugiat dui, et vulputate enim. Etiam malesuada varius felis, eu interdum nibh ullamcorper eu.",
      x: canvas.width,
      y: canvas.height - 50
    }

    ctx.font = "48px Arcade Classic";
    const textWidth = ctx.measureText(message.text).width;
    const gradient = ctx.createRadialGradient(canvas.width * 0.3, message.y, 30, canvas.width * 0.8, message.y, canvas.width);
    gradient.addColorStop(0, "orange");
    gradient.addColorStop(0.2, "yellow");
    gradient.addColorStop(0.4, "orange");
    gradient.addColorStop(0.6, "yellow");
    gradient.addColorStop(0.8, "orange");
    gradient.addColorStop(1, "yellow");
    ctx.fillStyle = gradient;

    const startTime = performance.now();

    (function draw(timestamp) {
      // const elapsedTimeUnits = (timestamp - startTime);
      const pixelData = ctx.createImageData(canvas.width, canvas.height);

      stars.forEach(star => putStar(pixelData, star));
      ctx.putImageData(pixelData, 0, 0);

      enemies.forEach(enemy => moveEnemy(ctx, enemy))
      putText(ctx, message);

      requestAnimationFrame(draw);
    })(startTime);
  </script>
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "image": "https://res.cloudinary.com/dopyq5kvf/image/upload/v1631173838/mattiassamskar_hgy3dl.jpg",
      "jobTitle": "Software Developer",
      "name": "Mattias Sämskar",
      "gender": "male",
      "height": "175 cm",
      "nationality": "Swedish",
      "url": "https://mattiassamskar.se",
      "sameAs": [
        "https://se.linkedin.com/in/mattiassamskar",
        "https://github.com/mattiassamskar"
      ]
    }
  </script>
</body>

</html>